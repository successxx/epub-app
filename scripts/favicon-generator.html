<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Favicon Generator</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .preview {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            align-items: center;
        }
        .preview-item {
            text-align: center;
        }
        canvas {
            border: 1px solid #ddd;
            image-rendering: crisp-edges;
        }
        button {
            background: #3B82F6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #2563EB;
        }
    </style>
</head>
<body>
    <h1>ePub.AI Favicon Generator</h1>
    <p>This page generates PNG favicons from the SVG logo.</p>

    <div class="preview">
        <div class="preview-item">
            <h3>16x16</h3>
            <canvas id="canvas16" width="16" height="16"></canvas>
        </div>
        <div class="preview-item">
            <h3>32x32</h3>
            <canvas id="canvas32" width="32" height="32"></canvas>
        </div>
        <div class="preview-item">
            <h3>64x64</h3>
            <canvas id="canvas64" width="64" height="64"></canvas>
        </div>
        <div class="preview-item">
            <h3>128x128</h3>
            <canvas id="canvas128" width="128" height="128"></canvas>
        </div>
    </div>

    <button onclick="downloadAll()">Download All Favicons</button>

    <script>
        const svgString = `<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect x="6" y="4" width="16" height="24" rx="1.5" fill="#3B82F6" stroke="#1E40AF" stroke-width="1.5"/>
  <line x1="6" y1="4" x2="6" y2="28" stroke="#1E40AF" stroke-width="1.5"/>
  <circle cx="14" cy="12" r="1.2" fill="white"/>
  <circle cx="18" cy="14" r="1.2" fill="white"/>
  <circle cx="14" cy="16" r="1.2" fill="white"/>
  <circle cx="18" cy="18" r="1.2" fill="white"/>
  <line x1="14" y1="12" x2="18" y2="14" stroke="white" stroke-width="0.8" opacity="0.5"/>
  <line x1="14" y1="16" x2="18" y2="14" stroke="white" stroke-width="0.8" opacity="0.5"/>
  <line x1="14" y1="16" x2="18" y2="18" stroke="white" stroke-width="0.8" opacity="0.5"/>
  <rect x="9" y="6" width="16" height="24" rx="1.5" fill="#93C5FD" opacity="0.3" transform="translate(-1, -1)"/>
</svg>`;

        function generateFavicon(size) {
            const canvas = document.getElementById(`canvas${size}`);
            const ctx = canvas.getContext('2d');

            const img = new Image();
            const blob = new Blob([svgString], {type: 'image/svg+xml'});
            const url = URL.createObjectURL(blob);

            img.onload = function() {
                ctx.drawImage(img, 0, 0, size, size);
                URL.revokeObjectURL(url);
            };

            img.src = url;
        }

        function downloadCanvas(canvas, filename) {
            canvas.toBlob(function(blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                a.click();
                URL.revokeObjectURL(url);
            });
        }

        function downloadAll() {
            downloadCanvas(document.getElementById('canvas16'), 'favicon-16x16.png');
            setTimeout(() => downloadCanvas(document.getElementById('canvas32'), 'favicon-32x32.png'), 200);
            setTimeout(() => downloadCanvas(document.getElementById('canvas32'), 'favicon.png'), 400);
            setTimeout(() => downloadCanvas(document.getElementById('canvas64'), 'favicon-64x64.png'), 600);
            setTimeout(() => downloadCanvas(document.getElementById('canvas128'), 'favicon-128x128.png'), 800);
        }

        // Generate all sizes on load
        window.onload = function() {
            [16, 32, 64, 128].forEach(size => generateFavicon(size));
        };
    </script>
</body>
</html>